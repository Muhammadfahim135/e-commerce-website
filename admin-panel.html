<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Admin Panel - eShop">
    <title>Admin Panel - eShop</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
        }

        /* Sidebar */
        .admin-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 260px;
            height: 100vh;
            background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
            padding: 20px;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .admin-logo {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 30px;
        }

        .admin-logo h2 {
            color: white;
            font-size: 24px;
            font-weight: 800;
        }

        .admin-logo span {
            color: #94a3b8;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .admin-menu {
            list-style: none;
        }

        .admin-menu-item {
            margin-bottom: 5px;
        }

        .admin-menu-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            color: #94a3b8;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 14px;
        }

        .admin-menu-link:hover,
        .admin-menu-link.active {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        .admin-menu-link i {
            width: 20px;
            text-align: center;
        }

        .admin-logout {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
        }

        .logout-btn {
            width: 100%;
            padding: 14px;
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #ef4444;
            color: white;
        }

        /* Main Content */
        .admin-main {
            margin-left: 260px;
            padding: 20px;
            min-height: 100vh;
        }

        .admin-header {
            background: white;
            padding: 20px 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title h1 {
            font-size: 28px;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 5px;
        }

        .header-title p {
            color: #64748b;
            font-size: 14px;
        }

        .admin-user {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-avatar {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }

        .admin-info h3 {
            font-size: 14px;
            color: #1e293b;
            font-weight: 600;
        }

        .admin-info span {
            font-size: 12px;
            color: #64748b;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stat-label {
            font-size: 13px;
            color: #64748b;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-icon {
            width: 45px;
            height: 45px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .stat-icon.blue {
            background: #eff6ff;
            color: #0066ff;
        }

        .stat-icon.green {
            background: #f0fdf4;
            color: #10b981;
        }

        .stat-icon.orange {
            background: #fff7ed;
            color: #f59e0b;
        }

        .stat-icon.purple {
            background: #faf5ff;
            color: #a855f7;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 5px;
        }

        .stat-trend {
            font-size: 13px;
            color: #10b981;
            font-weight: 600;
        }

        .stat-trend i {
            margin-right: 4px;
        }

        /* Content Sections */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 20px;
        }

        .data-table {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .table-header {
            padding: 20px 30px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
        }

        .table-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #1e293b;
        }

        .btn-secondary:hover {
            background: #e2e8f0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #f8fafc;
        }

        th {
            padding: 15px 30px;
            text-align: left;
            font-size: 13px;
            font-weight: 700;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            padding: 20px 30px;
            border-top: 1px solid #e2e8f0;
            font-size: 14px;
            color: #1e293b;
        }

        tr:hover {
            background: #f8fafc;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-success {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-warning {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-info {
            background: #dbeafe;
            color: #1e40af;
        }

        .action-btns {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 35px;
            height: 35px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .action-btn.edit {
            background: #eff6ff;
            color: #0066ff;
        }

        .action-btn.edit:hover {
            background: #0066ff;
            color: white;
        }

        .action-btn.delete {
            background: #fef2f2;
            color: #ef4444;
        }

        .action-btn.delete:hover {
            background: #ef4444;
            color: white;
        }

        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .admin-sidebar {
                transform: translateX(-100%);
            }

            .admin-main {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="admin-sidebar">
        <div class="admin-logo">
            <h2>eShop</h2>
            <span>Admin Panel</span>
        </div>

        <ul class="admin-menu">
            <li class="admin-menu-item">
                <a href="#" class="admin-menu-link active" data-section="dashboard">
                    <i class="fas fa-th-large"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="admin-menu-item">
                <a href="#" class="admin-menu-link" data-section="orders">
                    <i class="fas fa-shopping-bag"></i>
                    <span>Orders</span>
                </a>
            </li>
            <li class="admin-menu-item">
                <a href="#" class="admin-menu-link" data-section="products">
                    <i class="fas fa-box"></i>
                    <span>Products</span>
                </a>
            </li>
            <li class="admin-menu-item">
                <a href="#" class="admin-menu-link" data-section="customers">
                    <i class="fas fa-users"></i>
                    <span>Customers</span>
                </a>
            </li>
            <li class="admin-menu-item">
                <a href="#" class="admin-menu-link" data-section="analytics">
                    <i class="fas fa-chart-line"></i>
                    <span>Analytics</span>
                </a>
            </li>
            <li class="admin-menu-item">
                <a href="#" class="admin-menu-link" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </li>
        </ul>

        <div class="admin-logout">
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="admin-main">
        <!-- Header -->
        <div class="admin-header">
            <div class="header-title">
                <h1>Welcome back, Admin!</h1>
                <p id="currentDate">Loading...</p>
            </div>
            <div class="admin-user">
                <div class="admin-avatar">A</div>
                <div class="admin-info">
                    <h3 id="adminName">Administrator</h3>
                    <span id="loginTime">Just now</span>
                </div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <section id="dashboard" class="content-section active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Total Orders</span>
                        <div class="stat-icon blue">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="totalOrders">0</div>
                    <div class="stat-trend">
                        <i class="fas fa-arrow-up"></i> All time
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Revenue</span>
                        <div class="stat-icon green">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="totalRevenue">$0</div>
                    <div class="stat-trend">
                        <i class="fas fa-arrow-up"></i> +12% this month
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Customers</span>
                        <div class="stat-icon orange">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="totalCustomers">0</div>
                    <div class="stat-trend">
                        <i class="fas fa-arrow-up"></i> +5 new today
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Products</span>
                        <div class="stat-icon purple">
                            <i class="fas fa-box"></i>
                        </div>
                    </div>
                    <div class="stat-value">36</div>
                    <div class="stat-trend">
                        <i class="fas fa-minus"></i> In stock
                    </div>
                </div>
            </div>

            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Recent Orders</h2>
                    <button class="btn btn-secondary" onclick="showSection('orders')">View All</button>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Customer</th>
                            <th>Date</th>
                            <th>Total</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="recentOrdersTable">
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 40px; color: #94a3b8;">
                                No orders yet
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Orders Section -->
        <section id="orders" class="content-section">
            <h2 class="section-title">All Orders</h2>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Order Management</h2>
                    <div class="table-actions">
                        <button class="btn btn-secondary">
                            <i class="fas fa-filter"></i> Filter
                        </button>
                        <button class="btn btn-secondary">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Customer</th>
                            <th>Date</th>
                            <th>Items</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="ordersTable">
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 40px; color: #94a3b8;">
                                No orders found
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Products Section -->
        <section id="products" class="content-section">
            <h2 class="section-title">Products</h2>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Product Management</h2>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Product
                    </button>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Product Name</th>
                            <th>Category</th>
                            <th>Price</th>
                            <th>Stock</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Wireless Headphones</td>
                            <td>Electronics</td>
                            <td>$89.99</td>
                            <td>45</td>
                            <td><span class="badge badge-success">Active</span></td>
                            <td>
                                <div class="action-btns">
                                    <button class="action-btn edit"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Smart Watch</td>
                            <td>Electronics</td>
                            <td>$199.99</td>
                            <td>30</td>
                            <td><span class="badge badge-success">Active</span></td>
                            <td>
                                <div class="action-btns">
                                    <button class="action-btn edit"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Customers Section -->
        <section id="customers" class="content-section">
            <h2 class="section-title">Customers</h2>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Customer Management</h2>
                    <button class="btn btn-secondary">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Joined</th>
                            <th>Orders</th>
                            <th>Total Spent</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="customersTable">
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 40px; color: #94a3b8;">
                                No customers yet
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Analytics Section -->
        <section id="analytics" class="content-section">
            <h2 class="section-title">Analytics & Reports</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Conversion Rate</span>
                        <div class="stat-icon blue">
                            <i class="fas fa-percentage"></i>
                        </div>
                    </div>
                    <div class="stat-value">2.4%</div>
                    <div class="stat-trend">
                        <i class="fas fa-arrow-up"></i> +0.3% this week
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Avg Order Value</span>
                        <div class="stat-icon green">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="avgOrderValue">$0</div>
                    <div class="stat-trend">
                        <i class="fas fa-arrow-up"></i> +$15 from last month
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Return Rate</span>
                        <div class="stat-icon orange">
                            <i class="fas fa-undo"></i>
                        </div>
                    </div>
                    <div class="stat-value">1.2%</div>
                    <div class="stat-trend" style="color: #10b981;">
                        <i class="fas fa-arrow-down"></i> -0.5% improvement
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <span class="stat-label">Cart Abandonment</span>
                        <div class="stat-icon purple">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                    </div>
                    <div class="stat-value">18%</div>
                    <div class="stat-trend" style="color: #ef4444;">
                        <i class="fas fa-arrow-up"></i> +2% this week
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="content-section">
            <h2 class="section-title">Settings</h2>
            <div class="data-table">
                <div class="table-header">
                    <h2 class="table-title">Admin Settings</h2>
                </div>
                <div style="padding: 30px;">
                    <div style="margin-bottom: 30px;">
                        <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin-bottom: 15px;">
                            <i class="fas fa-key" style="color: #667eea;"></i> Password Management
                        </h3>
                        <p style="color: #64748b; margin-bottom: 20px; font-size: 14px;">
                            Update your admin password to keep your account secure.
                        </p>
                        <button class="btn btn-primary" onclick="changePassword()">
                            <i class="fas fa-lock"></i> Change Password
                        </button>
                    </div>

                    <div style="margin-bottom: 30px; padding-top: 30px; border-top: 1px solid #e2e8f0;">
                        <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin-bottom: 15px;">
                            <i class="fas fa-info-circle" style="color: #667eea;"></i> Current Configuration
                        </h3>
                        <div style="background: #f8fafc; padding: 20px; border-radius: 10px;">
                            <div style="margin-bottom: 15px;">
                                <span style="color: #64748b; font-size: 14px;">Username:</span>
                                <strong style="color: #1e293b; margin-left: 10px;" id="settingsUsername">admin</strong>
                            </div>
                            <div style="margin-bottom: 15px;">
                                <span style="color: #64748b; font-size: 14px;">Password Status:</span>
                                <strong style="color: #1e293b; margin-left: 10px;" id="passwordStatus">Default</strong>
                            </div>
                            <div>
                                <span style="color: #64748b; font-size: 14px;">Last Modified:</span>
                                <strong style="color: #1e293b; margin-left: 10px;" id="lastModified">Never</strong>
                            </div>
                        </div>
                    </div>

                    <div style="padding-top: 30px; border-top: 1px solid #e2e8f0;">
                        <h3 style="font-size: 18px; font-weight: 700; color: #1e293b; margin-bottom: 15px;">
                            <i class="fas fa-cog" style="color: #667eea;"></i> General Settings
                        </h3>
                        <p style="color: #64748b; margin-bottom: 20px; font-size: 14px;">
                            Additional configuration options for your admin panel.
                        </p>
                        <button class="btn btn-secondary">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Check authentication
        if (sessionStorage.getItem('adminAuthenticated') !== 'true') {
            window.location.href = 'admin-login.html';
        }

        // Set current date
        const now = new Date();
        document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });

        // Set admin name
        const adminUsername = sessionStorage.getItem('adminUsername');
        if (adminUsername) {
            document.getElementById('adminName').textContent = adminUsername.charAt(0).toUpperCase() + adminUsername.slice(1);
        }

        // Set login time
        const loginTime = sessionStorage.getItem('adminLoginTime');
        if (loginTime) {
            const loginDate = new Date(loginTime);
            const timeDiff = Math.floor((now - loginDate) / 1000 / 60);
            if (timeDiff < 1) {
                document.getElementById('loginTime').textContent = 'Just now';
            } else if (timeDiff < 60) {
                document.getElementById('loginTime').textContent = `${timeDiff} min ago`;
            } else {
                document.getElementById('loginTime').textContent = `${Math.floor(timeDiff / 60)} hours ago`;
            }
        }

        // Load dashboard data
        function loadDashboardData() {
            // Load orders
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            document.getElementById('totalOrders').textContent = orders.length;

            // Calculate revenue
            const totalRevenue = orders.reduce((sum, order) => sum + (order.total || 0), 0);
            document.getElementById('totalRevenue').textContent = `$${totalRevenue.toFixed(2)}`;

            // Calculate average order value
            const avgOrderValue = orders.length > 0 ? totalRevenue / orders.length : 0;
            document.getElementById('avgOrderValue').textContent = `$${avgOrderValue.toFixed(2)}`;

            // Load customers
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            document.getElementById('totalCustomers').textContent = users.length;

            // Load recent orders
            loadRecentOrders(orders);
            loadOrdersTable(orders);
            loadCustomersTable(users);
        }

        // Load recent orders
        function loadRecentOrders(orders) {
            const recentOrders = orders.slice(-5).reverse();
            const tableBody = document.getElementById('recentOrdersTable');

            if (recentOrders.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 40px; color: #94a3b8;">
                            No orders yet
                        </td>
                    </tr>
                `;
                return;
            }

            tableBody.innerHTML = recentOrders.map(order => `
                <tr>
                    <td><strong>${order.orderId}</strong></td>
                    <td>${order.customer.firstName} ${order.customer.lastName}</td>
                    <td>${new Date(order.orderDate).toLocaleDateString()}</td>
                    <td><strong>$${order.total.toFixed(2)}</strong></td>
                    <td><span class="badge badge-success">${order.status}</span></td>
                </tr>
            `).join('');
        }

        // Load all orders
        function loadOrdersTable(orders) {
            const tableBody = document.getElementById('ordersTable');

            if (orders.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 40px; color: #94a3b8;">
                            No orders found
                        </td>
                    </tr>
                `;
                return;
            }

            tableBody.innerHTML = orders.reverse().map(order => `
                <tr>
                    <td><strong>${order.orderId}</strong></td>
                    <td>${order.customer.firstName} ${order.customer.lastName}</td>
                    <td>${new Date(order.orderDate).toLocaleDateString()}</td>
                    <td>${order.items.length} items</td>
                    <td><strong>$${order.total.toFixed(2)}</strong></td>
                    <td><span class="badge badge-success">${order.status}</span></td>
                    <td>
                        <div class="action-btns">
                            <button class="action-btn edit" onclick="viewOrder('${order.orderId}')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn delete" onclick="deleteOrder('${order.orderId}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Load customers
        function loadCustomersTable(users) {
            const tableBody = document.getElementById('customersTable');
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');

            if (users.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px; color: #94a3b8;">
                            No customers yet
                        </td>
                    </tr>
                `;
                return;
            }

            tableBody.innerHTML = users.map(user => {
                const userOrders = orders.filter(o => o.customer.email === user.email);
                const totalSpent = userOrders.reduce((sum, o) => sum + o.total, 0);

                return `
                    <tr>
                        <td><strong>${user.name}</strong></td>
                        <td>${user.email}</td>
                        <td>${new Date().toLocaleDateString()}</td>
                        <td>${userOrders.length}</td>
                        <td><strong>$${totalSpent.toFixed(2)}</strong></td>
                        <td>
                            <div class="action-btns">
                                <button class="action-btn edit" onclick="viewCustomer('${user.email}')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // View order
        function viewOrder(orderId) {
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            const order = orders.find(o => o.orderId === orderId);
            if (order) {
                alert(`Order Details:\n\nOrder ID: ${order.orderId}\nCustomer: ${order.customer.firstName} ${order.customer.lastName}\nEmail: ${order.customer.email}\nTotal: $${order.total.toFixed(2)}\nStatus: ${order.status}`);
            }
        }

        // Delete order
        function deleteOrder(orderId) {
            if (confirm('Are you sure you want to delete this order?')) {
                let orders = JSON.parse(localStorage.getItem('orders') || '[]');
                orders = orders.filter(o => o.orderId !== orderId);
                localStorage.setItem('orders', JSON.stringify(orders));
                loadDashboardData();
                alert('Order deleted successfully!');
            }
        }

        // View customer
        function viewCustomer(email) {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === email);
            if (user) {
                alert(`Customer Details:\n\nName: ${user.name}\nEmail: ${user.email}`);
            }
        }

        // Menu navigation
        document.querySelectorAll('.admin-menu-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.getAttribute('data-section');
                showSection(sectionId);

                // Update active state
                document.querySelectorAll('.admin-menu-link').forEach(l => l.classList.remove('active'));
                link.classList.add('active');
            });
        });

        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // Show selected section
            document.getElementById(sectionId).classList.add('active');
        }

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                sessionStorage.removeItem('adminAuthenticated');
                sessionStorage.removeItem('adminUsername');
                sessionStorage.removeItem('adminLoginTime');
                window.location.href = 'admin-login.html';
            }
        }

        // Change password
        function changePassword() {
            if (confirm('You will be redirected to the password setup page. Continue?')) {
                window.location.href = 'admin-setup.html';
            }
        }

        // Load password status
        function loadPasswordStatus() {
            const customCreds = localStorage.getItem('adminCredentials');
            if (customCreds) {
                const creds = JSON.parse(customCreds);
                document.getElementById('passwordStatus').textContent = 'Custom Password';
                document.getElementById('passwordStatus').style.color = '#10b981';
                
                if (creds.setupDate) {
                    const setupDate = new Date(creds.setupDate);
                    document.getElementById('lastModified').textContent = setupDate.toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                }
            } else {
                document.getElementById('passwordStatus').textContent = 'Default Password';
                document.getElementById('passwordStatus').style.color = '#f59e0b';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData();
            loadPasswordStatus();
        });
    </script>
</body>
</html>
